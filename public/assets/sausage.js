//     jquery.sausage.js 1.0.0
//     (c) 2011 Christopher Cliff
//     Freely distributed under the MIT license.
//     For all details and documentation:
//     http://christophercliff.github.com/sausage
(function(a,b){a.widget("cc.sausage",{options:{page:".page",content:function(a,b){return'<span class="sausage-span">PÃ¡gina '+(a+1)+"</span>"}},_create:function(){var b=this,c=b.element;b.$outer=c,b.$inner=a.isWindow(b.element.get(0))?a("body"):c.children(":first-child"),b.$sausages=a('<div class="sausage-set"/>'),b.sausages=b.$sausages.get(0),b.offsets=[],b.$sausages.appendTo(b.$inner),b._trigger("create");return},_init:function(){var a=this;if(a.$outer.height()>=a.$inner.height()){a.destroy();return}a.draw(),a._update(),a._events(),a._delegates(),a.$sausages.addClass("sausage-set-init"),a.blocked=!1,a._trigger("init");return},_events:function(){var a=this;a.hasScrolled=!1,a.$outer.bind("resize.sausage",function(){a.draw()}).bind("scroll.sausage",function(b){a.hasScrolled=!0}),setInterval(function(){if(!a.hasScrolled)return;a.hasScrolled=!1,a._update()},250);return},_getCurrent:function(){var a=this,b=a.$outer.scrollTop()+a._getHandleHeight(a.$outer,a.$inner)/4,c=a.$outer.height(),d=a.$inner.height(),e=0;for(l=a.offsets.length;e<l;e++){if(!a.offsets[e+1])return e;if(b<=a.offsets[e])return e;if(b>a.offsets[e]&&b<=a.offsets[e+1])return e}return e},_delegates:function(){var b=this;b.$sausages.delegate(".sausage","hover",function(){if(b.blocked)return;a(this).toggleClass("sausage-hover")}).delegate(".sausage","click",function(c){c.preventDefault();if(b.blocked)return;var d=a(this),e=d.index(),f=b.$inner.find(b.options.page).eq(e).offset().top;b._scrollTo(f),b._trigger("onClick",c,{$sausage:d,i:e});if(d.hasClass("current"))return;b._trigger("onUpdate",c,{$sausage:d,i:e})});return},_scrollTo:function(b){var c=this,d=c.$outer,e=2,f=c.offsets[c.current]-b,g=Math.abs(f/e);g=g<1e3?g:1e3,c.$outer.get(0)===window&&(d=a("body, html, document")),d.stop(!0).animate({scrollTop:b},g);return},_handleClick:function(){var a=this;return},_update:function(){var a=this;i=a._getCurrent(),c="sausage-current";if(i===a.current||a.blocked)return;a.current=i,a.$sausages.children().eq(i).addClass(c).siblings().removeClass(c),a._trigger("update");return},_getHandleHeight:function(a,b){var c=a.height(),d=b.height();return c/d*c},draw:function(){var a=this,b=a.$outer.height(),c=a.$inner.height(),d=a.$inner.find(a.options.page),e,f=[],g,h;a.offsets=[],a.count=d.length,a.$sausages.detach().empty();for(var i=0;i<a.count;i++)e=d.eq(i),g=e.offset(),h=g.top/c*b,f.push('<div class="sausage'+(i===a.current?" sausage-current":"")+'" style="height:'+e.outerHeight()/c*b+"px;top:"+h+'px;">'+a.options.content(i,e)+"</div>"),a.offsets.push(g.top);a.sausages.innerHTML=f.join(""),a.$sausages.appendTo(a.$inner);return},block:function(){var a=this,b="sausage-set-blocked";a.blocked=!0,a.$sausages.addClass(b);return},unblock:function(){var a=this,b="sausage-set-blocked";a.$sausages.removeClass(b),a.blocked=!1;return},destroy:function(){var a=this;a.$outer.unbind(".sausage"),a.$sausages.remove();return}})})(jQuery);