Ext.define("Cursame.view.assignments.AssignmentContainer",{extend:"Ext.Container",xtype:"assignmentcontainer",requires:["Cursame.view.assignments.AssignmentTpl"],config:{tpl:Ext.create("Cursame.view.assignments.AssignmentTpl",true)}});Ext.define("Cursame.view.assignments.AssignmentList",{extend:"Ext.List",xtype:"assignmentslist",requires:["Cursame.view.assignments.AssignmentTpl"],config:{store:"Assignments",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},itemTpl:Ext.create("Cursame.view.assignments.AssignmentTpl",false)}});Ext.define("Cursame.view.assignments.AssignmentTpl",{extend:"Ext.XTemplate",constructor:function(c){var d=['<div class="course fill-container">','<div class="left">','<div class="img"><img src="'+Cursame.Path+'/assets/course_small.png" /></div>',"</div>",'<div class="properties">',"<p>{name}</p>","<div>",'<em class="prop">'+lang.valuee+': </em><em class="val">{value}</em></br>','<em class="prop">'+lang.period+': </em><em class="val">{period}</em>',"</div>",'<div><em class="prop">'+lang.limitDate+': </em><em class="val">{due_to}</em></div>','<div class="description">{description}</div>',"</div>","</div>"];if(c){d.splice(0,1,'<div class="course">')}this.callParent(d)}});Ext.define("Cursame.view.assignments.AssignmentWall",{extend:"Ext.List",xtype:"assignmentwall",requires:["Cursame.view.assignments.AssignmentContainer","Cursame.view.comments.CommentTpl","Cursame.view.comments.CommentToolbar"],config:{store:"Comments",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},items:[{xtype:"assignmentcontainer"},{xtype:"commentbar"}],itemTpl:Ext.create("Cursame.view.comments.CommentTpl",true)}});Ext.define("Cursame.view.comments.CommentContainer",{extend:"Ext.Container",xtype:"commentcontainer",config:{tpl:Ext.create("Cursame.view.comments.CommentTpl",true)}});Ext.define("Cursame.view.comments.CommentToolbar",{extend:"Ext.Toolbar",xtype:"commentbar",config:{docked:"bottom",ui:"accept",layout:"hbox",items:[{xtype:"textfield",placeHolder:lang.sendComment,flex:5},{xtype:"button",text:lang.send,disabled:true,ui:"accept",margin:5,flex:1}]}});Ext.define("Cursame.view.comments.CommentTpl",{extend:"Ext.XTemplate",constructor:function(c){var d,c;d=['<div class="comment ">','<div class="img">','<img src="'+Cursame.Path+'/assets/course_small.png" />',"</div>",'<div class="contenido">','<div class="title">{userfirstname} {userlasttname}</div>','<div class="text">',"{text}","</div>","<!-- minibar -->","</div>","</div>"];minibarhtml=['<div class="minibar">','<div class="action"> '+lang.comment+"</div>",'<div class="info">','<img src="./assets/Cursame/resources/images/icons/comment.png"/>{numcommnets}',"</div>","</div>"].join("");if(c){d.splice(9,1,minibarhtml)}else{d.splice(0,1,'<div class="comment comments-background">')}this.callParent(d)}});Ext.define("Cursame.view.comments.CommentWall",{extend:"Ext.List",xtype:"commentwall",requires:["Cursame.view.comments.CommentContainer","Cursame.view.comments.CommentTpl","Cursame.view.comments.CommentToolbar"],config:{store:"CommentsComments",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},items:[{xtype:"commentcontainer"},{xtype:"commentbar"}],itemTpl:Ext.create("Cursame.view.comments.CommentTpl",false)}});Ext.define("Cursame.view.courses.CourseContainer",{extend:"Ext.Container",xtype:"coursecontainer",config:{tpl:Ext.create("Ext.XTemplate",'<div class="course">','<div class="left">','<div class="img"><img src="'+Cursame.Path+'/assets/course_small.png" /></div>',"</div>",'<div class="properties">',"<p>{name}</p>","<div>",'<em class="prop">'+lang.startDate+': </em><em class="val">{start_date}</em></br>','<em class="prop">'+lang.endDate+': </em><em class="val">{finish_date}</em>',"</div>",'<div><em class="prop">'+lang.timee+': </em><em class="val">10</em></div>','<div class="description">{description}</div>',"</div>",'<div class="boxes">','<div class="box box-1"><em class="val">{owner}</em><br><em class="prop">'+lang.teacher.toUpperCase()+"</em></div>",'<div class="box box-2"><em class="val">{members}</em><br><em class="prop">'+lang.members.toUpperCase()+"</em></div>","</div>","</div>")}});Ext.define("Cursame.view.courses.CourseList",{extend:"Ext.List",xtype:"courselist",config:{store:"Courses",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},plugins:["pullrefresh",{type:"listpaging",autoPaging:true}],itemTpl:Ext.create("Ext.XTemplate",'<div class="comment ">','<div class="img">','<img src="'+Cursame.Path+'/assets/course_small.png" />',"</div>",'<div class="contenido">','<div class="title">{name}</div>','<div class="text">',"{description}","</div>","<!-- minibar -->","</div>","</div>")}});Ext.define("Cursame.view.courses.CourseMenu",{extend:"Ext.Container",xtype:"coursemenu",config:{defaults:{xtype:"container",flex:1,layout:"hbox",defaults:{flex:2,margin:5}},layout:"vbox",items:[{flex:2,xtype:"container",tpl:Ext.create("Ext.XTemplate",'<div class="course">','<div class="left">','<div class="img"><img src="'+Cursame.Path+'/assets/course_small.png" /></div>',"</div>",'<div class="properties">',"<p>{name}</p>","<div>",'<em class="prop">'+lang.startDate+': </em><em class="val">{start_date}</em></br>','<em class="prop">'+lang.endDate+': </em><em class="val">{finish_date}</em>',"</div>",'<div><em class="prop">'+lang.timee+': </em><em class="val">10</em></div>','<div class="description">{description}</div>',"</div>","</div>")},{xtype:"toolbar",docked:"bottom",ui:"accept",items:[{xtype:"button",iconCls:"nodes2",ui:"accept",action:"wall",badgeText:lang.wall,iconAlign:"bottom",badgeCls:"menu-badge",iconMask:true},{xtype:"button",iconCls:"inbox2",ui:"accept",action:"assignments",badgeText:lang.assignments,iconAlign:"bottom",badgeCls:"menu-badge",iconMask:true},{xtype:"button",iconCls:"doc_list",ui:"accept",badgeText:lang.surveys,iconAlign:"bottom",badgeCls:"menu-badge",action:"surveys",iconMask:true},{xtype:"button",iconCls:"chat",ui:"accept",badgeText:lang.discussions,iconAlign:"bottom",badgeCls:"menu-badge",action:"discussions",iconMask:true},{xtype:"button",iconCls:"team1",ui:"accept",badgeText:lang.members,iconAlign:"bottom",badgeCls:"menu-badge",action:"members",iconMask:true}]}]}});Ext.define("Cursame.view.courses.CourseNavigationView",{extend:"Ext.navigation.View",xtype:"coursenavigationview",requires:["Cursame.view.courses.CourseList","Cursame.view.courses.CourseMenu","Cursame.view.users.UserList","Cursame.view.assignments.AssignmentList","Cursame.view.assignments.AssignmentWall","Cursame.view.surveys.SurveyList","Cursame.view.surveys.SurveyWall","Cursame.view.discussions.DiscussionList","Cursame.view.discussions.DiscussionWall"],config:{items:{xtype:"courselist",title:lang.courses}},applyLayout:function(b){b=b||{};if(Ext.os.is.Android){b.animation=false}return b}});Ext.define("Cursame.view.courses.CourseWall",{extend:"Ext.List",xtype:"coursewall",requires:["Cursame.view.courses.CourseContainer","Cursame.view.comments.CommentTpl","Cursame.view.comments.CommentToolbar"],config:{store:"Comments",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},items:[{xtype:"coursecontainer"},{xtype:"commentbar"}],itemTpl:Ext.create("Cursame.view.comments.CommentTpl",true)}});Ext.define("Cursame.view.discussions.DiscussionContainer",{extend:"Ext.Container",xtype:"discussioncontainer",requires:["Cursame.view.discussions.DiscussionTpl"],config:{tpl:Ext.create("Cursame.view.discussions.DiscussionTpl",true)}});Ext.define("Cursame.view.discussions.DiscussionList",{extend:"Ext.List",xtype:"discussionslist",requires:["Cursame.view.discussions.DiscussionTpl"],config:{store:"Discussions",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},itemTpl:Ext.create("Cursame.view.discussions.DiscussionTpl",false)}});Ext.define("Cursame.view.discussions.DiscussionTpl",{extend:"Ext.XTemplate",constructor:function(c){var d=['<div class="comment fill-container">','<div class="img">','<img src="'+Cursame.Path+'/assets/course_small.png" />',"</div>",'<div class="contenido">','<div class="title">{title}</div>','<div class="text">',"{description}","</div>","</div>","</div>"];if(c){d.splice(0,1,'<div class="course">')}this.callParent(d)}});Ext.define("Cursame.view.discussions.DiscussionWall",{extend:"Ext.List",xtype:"discussionwall",requires:["Cursame.view.discussions.DiscussionContainer","Cursame.view.comments.CommentTpl","Cursame.view.comments.CommentToolbar"],config:{store:"Comments",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},items:[{xtype:"discussioncontainer"},{xtype:"commentbar"}],itemTpl:Ext.create("Cursame.view.comments.CommentTpl",true)}});Ext.define("Cursame.view.LoginForm",{extend:"Ext.form.Panel",xtype:"loginform",requires:["Ext.form.FieldSet","Ext.field.Email","Ext.field.Password","Ext.Img","Cursame.model.UserLogin"],config:{ui:"login",padding:"15 15 15 15",style:{backGroundColor:"#FFF"},items:[{xtype:"container",height:70,},{xtype:"container",layout:"hbox",height:64,items:[{xtype:"container",flex:1},{xtype:"image",padding:"15 15 15 15",src:Cursame.src+"resources/images/cursa.png",width:150},{xtype:"container",flex:1}]},{xtype:"fieldset",defaults:{required:true,},items:[{xtype:"emailfield",name:"email",placeHolder:lang.email,value:"maestro@cursa.me",clearIcon:true},{xtype:"passwordfield",name:"password",placeHolder:lang.password,value:"maestrocursame7",clearIcon:true}]},{xtype:"fieldset",items:[{xtype:"button",text:lang.login,ui:"accept",handler:function(a){var b,c;b=this.up("formpanel");c=b.getValues(),b;b.setMasked({xtype:"loadmask",message:lang.starting});b.fireEvent("masking",b);Cursame.model.UserLogin.load(888,{params:{email:c.email,password:c.password},success:function(d,e){b.setMasked(false);b.fireEvent("unmasking",b);if(d){Cursame.User=d;b.fireEvent("login",b)}else{b.setMasked({xtype:"loadmask",message:e._response.response.message});b.fireEvent("error",b,e._response.response.message);setTimeout(function(){b.setMasked(false)},1000)}}})}}]}]}});Ext.define("Cursame.view.Main",{extend:"Ext.Container",xtype:"main",requires:["Cursame.view.LoginForm","Cursame.view.notifications.NotificationsList","Cursame.view.notifications.NavigationView","Cursame.view.courses.CourseNavigationView","Cursame.view.comments.CommentTpl","Cursame.view.users.UserTpl","Cursame.view.assignments.AssignmentTpl","Cursame.view.surveys.SurveyTpl","Cursame.view.discussions.DiscussionTpl"],config:{layout:"card",fullscreen:true,autoDestroy:false}});Ext.define("Cursame.view.notifications.NavigationView",{extend:"Ext.navigation.View",xtype:"notificationnavigationview",requires:["Cursame.view.notifications.NotificationsList","Cursame.view.courses.CourseWall","Cursame.view.comments.CommentWall"],config:{items:{xtype:"notificationslist",title:lang.notifications}},applyLayout:function(b){b=b||{};if(Ext.os.is.Android){b.animation=false}return b}});Ext.define("Cursame.view.notifications.NotificationListItem",{extend:"Ext.dataview.component.DataItem",xtype:"notificationlistitem",requieres:["Ext.Img"],config:{ui:"notification",dataMap:{getUser:{setHtml:"user"},getText:{setHtml:"text"},getAvatar:{setScr:"avatar"},getCreated:{setHtml:"created"},getDeclineButton:{setHidden:"btn"},getAcceptButton:{setHidden:"btn"}},user:{cls:"user",},text:{cls:"text"},avatar:{docked:"left",cls:"avatar",height:48,width:48,src:Cursame.src+"resources/images/avatar_normal.png"},declineButton:{docked:"right",iconMask:true,cls:"c-button",margin:"10 0 0 3",iconCls:"delete",ui:"decline",accept:false},acceptButton:{docked:"right",iconMask:true,cls:"c-button",margin:"10 0 0 3",iconCls:"check1",ui:"small",accept:true},created:{cls:"time-ago"},layout:{type:"vbox"}},applyUser:function(b){return Ext.factory(b,Ext.Component,this.getUser())},updateUser:function(b){if(b){this.insert(0,b)}},applyText:function(b){return Ext.factory(b,Ext.Component,this.getText())},updateText:function(b){if(b){this.add(b)}},applyAvatar:function(b){return Ext.factory(b,Ext.Img,this.getAvatar())},updateAvatar:function(b){if(b){this.add(b)}},applyDeclineButton:function(b){return Ext.factory(b,Ext.Button,this.getDeclineButton())},updateDeclineButton:function(b){if(b){this.add(b)}},applyAcceptButton:function(b){return Ext.factory(b,Ext.Button,this.getAcceptButton())},updateAcceptButton:function(b){if(b){this.add(b)}},applyCreated:function(b){return Ext.factory(b,Ext.Component,this.getCreated())},updateCreated:function(b){if(b){this.add(b)}}});Ext.define("Cursame.view.notifications.NotificationsList",{extend:"Ext.dataview.DataView",xtype:"notificationslist",requires:["Cursame.view.notifications.NotificationListItem","Ext.plugin.PullRefresh","Ext.plugin.ListPaging"],config:{ui:"notification",defaultType:"notificationlistitem",store:"Notifications",allowDeselect:false,useComponents:true,emptyText:"Nothing found.",plugins:["pullrefresh",{type:"listpaging",autoPaging:true}]}});Ext.define("Cursame.view.surveys.SurveyContainer",{extend:"Ext.Container",xtype:"surveycontainer",config:{tpl:Ext.create("Cursame.view.surveys.SurveyTpl",true)}});Ext.define("Cursame.view.surveys.SurveyList",{extend:"Ext.List",xtype:"surveyslist",requires:["Cursame.view.surveys.SurveyTpl"],config:{store:"Surveys",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},itemTpl:Ext.create("Cursame.view.surveys.SurveyTpl",false)}});Ext.define("Cursame.view.surveys.SurveyTpl",{extend:"Ext.XTemplate",constructor:function(c){var d=['<div class="course fill-container">','<div class="left">','<div class="img"><img src="'+Cursame.Path+'/assets/course_small.png" /></div>',"</div>",'<div class="properties">',"<p>{name}</p>","<div>",'<em class="prop">'+lang.valuee+': </em><em class="val">{value}</em></br>','<em class="prop">'+lang.period+': </em><em class="val">{period}</em>',"</div>",'<div><em class="prop">'+lang.limitDate+': </em><em class="val">{due_to}</em></div>','<div class="description">{description}</div>',"</div>","</div>"];if(c){d.splice(0,1,'<div class="course">')}this.callParent(d)}});Ext.define("Cursame.view.surveys.SurveyWall",{extend:"Ext.List",xtype:"surveywall",requires:["Cursame.view.surveys.SurveyContainer","Cursame.view.comments.CommentTpl","Cursame.view.comments.CommentToolbar"],config:{store:"Comments",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},items:[{xtype:"surveycontainer"},{xtype:"commentbar"}],itemTpl:Ext.create("Cursame.view.comments.CommentTpl",true)}});Ext.define("Cursame.view.users.UserContainer",{extend:"Ext.List",xtype:"usercontainer",requires:["Cursame.view.users.UserTpl"],config:{store:"Surveys",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},itemTpl:Ext.create("Cursame.view.users.UserTpl",false)}});Ext.define("Cursame.view.users.UserList",{extend:"Ext.List",xtype:"userslist",config:{store:"Users",masked:{xtype:"loadmask",message:lang.loading},scrollable:{direction:"vertical",directionLock:true},disclosure:true,grouped:true,indexBar:true,itemTpl:Ext.create("Ext.XTemplate",'<div class="comment ">','<div class="img">','<img src="'+Cursame.Path+'/assets/course_small.png" />',"</div>",'<div class="contenido">','<div class="title">{first_name} {last_name}</div>','<div class="text">',"{role}","</div>","</div>","</div>")}});Ext.define("Cursame.view.users.UserNavigationView",{extend:"Ext.navigation.View",xtype:"usernavigationview",requires:["Cursame.view.users.UserWall"],config:{},applyLayout:function(b){b=b||{};if(Ext.os.is.Android){b.animation=false}return b}});Ext.define("Cursame.view.users.UserTpl",{extend:"Ext.XTemplate",constructor:function(){var b=['<div class="comment ">','<div class="img">','<img src="'+Cursame.Path+'/assets/course_small.png" />',"</div>",'<div class="contenido">','<div class="title">{first_name} {last_name}</div>','<div class="text">',"{role}","</div>",'<div class="text"><b>'+lang.about_me+"</b> {about_me}</div>",'<div class="text"><b>'+lang.studies+"</b> {studies}</div>",'<div class="text"><b>'+lang.occupation+"</b> {occupation}</div>",'<div class="title">@{twitter_link}</div>',"</div>","</div>"];this.callParent(b)}});Ext.define("Cursame.view.users.UserWall",{extend:"Ext.List",xtype:"userwall",requires:["Cursame.view.users.UserContainer"],config:{store:"Users",masked:{},scrollable:{direction:"vertical",directionLock:true},items:[{xtype:"usercontainer"}],itemTpl:Ext.create("Cursame.view.users.UserTpl",true)}});