Ext.define("Cursame.model.Assignment",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"course_id",type:"int"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"value",type:"int"},{name:"period",type:"int"},{name:"due_to",type:"date",dateFormat:"c",convert:function(b,a){return Ext.Date.format(new Date(b),"d-m-Y, g:i a")}},{name:"start_at"},{name:"state"},],proxy:{type:"jsonp",url:Cursame.Url+"api/assignments.json",reader:{type:"json",rootProperty:"assignments"}}}});Ext.define("Cursame.model.Comment",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"commentable_id",type:"int"},{name:"commentable_type",type:"string"},{name:"created_at",type:"date"},{name:"text",type:"string"},{name:"user_id",type:"int"},{name:"userfirstname",type:"string",mapping:"user.first_name"},{name:"userlasttname",type:"string",mapping:"user.last_name"},{name:"userimage",type:"string",mapping:"user.avatar_file.small.url"},{name:"numcommnets",type:"int",mapping:"comments",convert:function(b,a){return b.length}}],proxy:{type:"jsonp",url:Cursame.Url+"api/comments.json",reader:{type:"json",rootProperty:"comments"}}}});Ext.define("Cursame.model.Course",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"image",type:"string"},{name:"public",type:"boolean"},{name:"owner",type:"string"},{name:"members",type:"int"},{name:"start_date"},{name:"finish_date"}],proxy:{type:"jsonp",url:Cursame.Url+"api/courses.json",reader:{type:"json",rootProperty:"courses"}}}});Ext.define("Cursame.model.Discussion",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"course_id",type:"int"},{name:"title",type:"string"},{name:"description",type:"string"},{name:"user_id",type:"int"}],proxy:{type:"jsonp",url:Cursame.Url+"api/discussions.json",reader:{type:"json",rootProperty:"discussions"}}}});Ext.define("Cursame.model.Notification",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"text",type:"string",convert:function(c,a){var d,b;if(c.text){d=c.text[0].toUpperCase()+c.text.slice(1);b=a.data;b.user=c.user?c.user.last_name+""+c.user.first_name:"";b.survey=c.survey?c.survey.name:"";b.asignment=c.asignment?c.asignment.name:"";b.course=c.course?c.course.name:"";b.text2=c.text2?c.text2:"";b.state=c.notificator?c.notificator.state:"";b.course_id=c.course?c.course.id:"";b.courseObject=c.course?c.course:"";b.courseOwner=c.course?c.courseOwner:"";b.courseComments=c.course?c.courseComments:"";b.courseMembers=c.course?c.courseMembers:"";return[d,'<em class="active-font">',b.survey,"</em>",b.text2,'<em class="active-font">',b.course,"</em>"].join(" ")}return""}},{name:"user_id",type:"string"},{name:"notificator_type",type:"string"},{name:"notificator_id",type:"string"},{name:"avatar",type:"string",mapping:"text.image",convert:function(b,a){console.log(b);b=b?Cursame.Path+b.url:Cursame.src+"resources/images/avatar_normal.png";console.log(b);return b}},{name:"user",type:"string"},{name:"survey",type:"string"},{name:"asignment",type:"string"},{name:"course",type:"string"},{name:"text2",type:"string"},{name:"kind",type:"string"},{name:"state",type:"string"},{name:"course_id",type:"int"},{name:"courseObject"},{name:"courseOwner"},{name:"courseComments"},{name:"courseMembers"},{name:"btn",type:"boolean",convert:function(b,a){if(a.get("kind")==="student_course_enrollment"&&a.get("state")==="pending"){return false}return true}},{name:"created",type:"date",mapping:"created_at",convert:function(b,h){try{var a=Math.ceil(Number(new Date())/1000),c=Math.ceil(Number(new Date(b))/1000),f=a-c,g;if(f<60){return String(f)+" s"}else{if(f<3600){g=String(Math.ceil(f/(60)));return g+(g=="1"?" m":" m")}else{if(f<86400){g=String(Math.ceil(f/(3600)));return g+(g=="1"?" h":" h")}else{if(f<60*60*24*365){g=String(Math.ceil(f/(60*60*24)));return g+(g=="1"?" d":" d")}else{return Ext.Date.format(new Date(b),"jS M 'y")}}}}}catch(d){return""}}}],proxy:{type:"jsonp",url:Cursame.Url+"api/notifications.json",reader:{type:"json",rootProperty:"notifications"}}}});Ext.define("Cursame.model.Survey",{extend:"Ext.data.Model",config:{fields:[{name:"id",type:"int"},{name:"course_id",type:"int"},{name:"name",type:"string"},{name:"description",type:"string"},{name:"value",type:"int"},{name:"period",type:"int"},{name:"due_to",type:"date",dateFormat:"c",convert:function(b,a){return Ext.Date.format(new Date(b),"d-m-Y, g:i a")}},{name:"start_at"},{name:"state"},],proxy:{type:"jsonp",url:Cursame.Url+"api/surveys.json",reader:{type:"json",rootProperty:"surveys"}}}});Ext.define("Cursame.model.User",{extend:"Ext.data.Model",config:{fields:["id","about_me",{name:"token",mapping:"authentication_token"},"avatar_file","birth_date","email","facebook_link","first_name","last_name","linkedin_link","occupation",{name:"role",convert:function(b,a){return lang[b]}},"studies","twitter_link"],proxy:{type:"jsonp",url:Cursame.Url+"api/users.json",reader:{type:"json",rootProperty:"users"}}}});Ext.define("Cursame.model.UserLogin",{extend:"Ext.data.Model",config:{fields:["id","about_me",{name:"token",mapping:"authentication_token"},"avatar_file","birth_date","email","facebook_link","first_name","last_name","linkedin_link","occupation","role","studies","twitter_link"],proxy:{type:"jsonp",url:Cursame.Url+"tokens/create.json",reader:{type:"json",rootProperty:"response.user"}}}});