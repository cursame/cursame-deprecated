<h2><%= t('.legend') %></h2>
<div class="well">
  <fieldset class="nested_models questions input no-margin inputs" data-association="questions">
    <%- template_record = form.object.questions.build %>
    <%= form.semantic_fields_for :questions do |question| %>
      <%- record = question.object %>
      <fieldset class="<%= record == template_record ? :new : nil %> associated question">
        <% unless record.errors[:answer_uuid].blank? %> 
          <p class="inline-errors"><%= record.errors[:answer_uuid].to_sentence %></p>
        <% end %>
        <%= question.hidden_field :answer_uuid, :value => '' %>
        <ol>
          <%= question.input :position, :input_html => {:class => 'question-position'}, :as => :hidden %>
          <%= question.input :text %>
          <%= question.input :value %>
          <%= question.input :_destroy, :as => :boolean %>
        </ol>
        <%= render :partial => 'answer_fields', :locals => {:form => question} %>
      </fieldset>
    <% end %>
    <%= link_to t('.add_question'), '#', :class => 'btn small info add_record', :style => 'display:none' %>
  </fieldset>
</div>
